class Bizon{#defaultOptions={title:null,images:[],callbacks:{onClose:null}};#options={};#bizonEl=null;#mainImageWrapper=null;#mainImageEl=null;#mainVideoEl=null;#currentImageIndex=0;constructor(e={}){this.#options={...this.#defaultOptions,...e},Array.isArray(this.#options.images)&&0!==this.#options.images.length||console.warn("BizonGallery: No images provided.")}show(){this.#createSlider(),this.#setMainImage(this.#currentImageIndex),this.#bindEvents()}hide(){this.#unbindEvents(),this.#bizonEl?.remove(),this.#options.callbacks?.onClose?.()}#isVideo(e){return"video"===e?.type?.toLowerCase()||/\.(mp4|wmv|mpg|mpeg)$/i.test(e?.src)}#createSlider(){this.#bizonEl=document.createElement("div"),this.#bizonEl.id="bizon-slider",this.#bizonEl.classList.add("prevent-select"),1===this.#options.images.length&&this.#bizonEl.classList.add("bizon-single-image");var e=document.createElement("div"),t=(e.id="bizon-main-image",this.#mainImageWrapper=document.createElement("div"),this.#mainImageWrapper.id="bizon-main-image-wrapper",1<this.#options.images.length&&((t=document.createElement("div")).className="bizon-arrow bizon-arrow-left",t.title="Previous image",t.addEventListener("click",e=>{e.stopPropagation(),this.#setMainImage(this.#currentImageIndex-1)}),(i=document.createElement("div")).className="bizon-arrow bizon-arrow-right",i.title="Next image",i.addEventListener("click",e=>{e.stopPropagation(),this.#setMainImage(this.#currentImageIndex+1)}),e.appendChild(t),e.appendChild(i)),document.createElement("div")),i=(t.className="bizon-close",t.title="Close",t.addEventListener("click",e=>{e.stopPropagation(),this.hide()}),e.appendChild(this.#mainImageWrapper),e.appendChild(t),e.addEventListener("click",e=>{var t;"bizon-main-image-wrapper"===e.target.id?this.hide():1<this.#options.images.length&&(t=e.target.getBoundingClientRect(),e.clientX>t.left+t.width/2?this.#setMainImage(this.#currentImageIndex+1):this.#setMainImage(this.#currentImageIndex-1))}),document.createElement("div"));i.id="bizon-thumbnails",1<this.#options.images.length&&this.#createThumbnails(i),this.#bizonEl.append(e,i),document.body.appendChild(this.#bizonEl)}#createThumbnails(n){this.#options.images.forEach((e,t)=>{var i=document.createElement("img"),e=(i.src=e.thumb||e.src,i.alt=e.caption||"",i.title=e.caption||"",document.createElement("div"));e.classList.add("bizon-thumb-wrapper"),0===(e.dataset.index=t)&&e.classList.add("bizon-thumb-wrapper-active"),e.appendChild(i),e.addEventListener("click",()=>this.#setMainImage(t)),n.appendChild(e)})}#setMainImage(t){if(!(t<0||t>=this.#options.images.length)){this.#currentImageIndex=t;t=this.#options.images[t];this.#mainImageWrapper.innerHTML="";let e;this.#isVideo(t)?(e=document.createElement("video"),Object.assign(e,{src:t.src,autoplay:!0,playsInline:!0,loop:!0,controls:!0,controlsList:"nodownload",oncontextmenu:()=>!1})):(e=document.createElement("img")).src=t.src,e.alt=t.caption||"",e.title=t.caption||"",this.#mainImageWrapper.appendChild(e),this.#updateThumbnails()}}#updateThumbnails(){document.querySelectorAll(".bizon-thumb-wrapper-active").forEach(e=>e.classList.remove("bizon-thumb-wrapper-active")),document.querySelector(`[data-index="${this.#currentImageIndex}"]`)?.classList.add("bizon-thumb-wrapper-active")}#bindEvents(){document.addEventListener("keydown",this.#handleKeyDown)}#unbindEvents(){document.removeEventListener("keydown",this.#handleKeyDown)}#handleKeyDown=e=>{"Escape"===e.key?this.hide():"ArrowLeft"===e.key?this.#setMainImage(this.#currentImageIndex-1):"ArrowRight"===e.key&&this.#setMainImage(this.#currentImageIndex+1)}}