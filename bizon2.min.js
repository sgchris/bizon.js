window.Bizon=class{#defaultOptions={title:null,images:[],callbacks:{onClose:null}};#options={};#bizonEl=null;#mainImageWrapper=null;#mainImageEl=null;#mainVideoEl=null;#rightButtonEl=null;#leftButtonEl=null;#closeButtonEl=null;#currentImageIndex=0;#bizonHtml=['<div id="bizon-slider" class="prevent-select">','<div id="bizon-main-image"></div>','<div id="bizon-thumbnails"></div>',"</div>"].join("");constructor(i){this.#options={...this.#defaultOptions,...i}}show(){0===this.#options.images.length?console.warn("Bizon: images are not provided"):1<this.#options.images.length&&this.#options.images.some(i=>this.#isVideo(i))?console.error("Bizon gallery does not support gallery for video files"):(this.#initBizonEl(),this.#initMainImage(),this.#initThumbnails(),this.#initControls(),this.#setMainImage(this.#currentImageIndex),this.#bindEvents())}#isVideo(i){return"string"==typeof i.type&&"video"==i.type.toLowerCase()||i.src.match(/\.(mp4|wmv|mpg|mpeg)$/g)}hide(){this.#unbindEvents(),this.#bizonEl.remove(),"function"==typeof this.#options.callbacks.onClose&&this.#options.callbacks.onClose()}#initBizonEl(){this.#bizonEl&&(this.#bizonEl.remove(),this.#bizonEl=null);var i=document.createElement("div");i.innerHTML=this.#bizonHtml,this.#bizonEl=i.firstChild,this.#bizonEl.parentNode.removeChild(this.#bizonEl),i.remove(),this.#options.images.length<=1&&this.#bizonEl.classList.add("bizon-single-image"),document.body.appendChild(this.#bizonEl)}#initMainImage(){this.#mainImageWrapper=document.createElement("div"),this.#mainImageWrapper.id="bizon-main-image-wrapper",this.#mainImageEl=document.createElement("img"),this.#bizonEl.querySelector("#bizon-main-image").appendChild(this.#mainImageWrapper)}#initThumbnails(){if(!(this.#options.images.length<=1)){const n=this;this.#options.images.forEach((i,t)=>{var e="string"==typeof i.type&&"video"==i.type.toLowerCase()?"video":"img",e=document.createElement(e),i=(e.src=i.thumb||i.src,i.caption&&(e.setAttribute("alt",i.caption),e.setAttribute("title",i.caption)),document.createElement("div"));i.classList.add("bizon-thumb-wrapper"),i.setAttribute("thumb-index",t),0==t&&i.classList.add("bizon-thumb-wrapper-active"),i.appendChild(e),i.onclick=i=>{this.#setMainImage(t)},n.#bizonEl.querySelector("#bizon-thumbnails").appendChild(i)})}}#setMainImageEl(){const n=this.#options.images[this.#currentImageIndex];var i="string"==typeof n.type&&"video"==n.type.toLowerCase()||n.src.match(/\.(mp4|wmv|mpg|mpeg)$/g);this.#mainImageWrapper.firstChild&&this.#mainImageWrapper.removeChild(this.#mainImageWrapper.firstChild);let s;(s=i?(this.#mainVideoEl=document.createElement("video"),this.#mainVideoEl.autoplay=!0,this.#mainVideoEl.playsinline=!0,this.#mainVideoEl.muted=!1,this.#mainVideoEl.loop=!0,this.#mainVideoEl.controls=!0,this.#mainVideoEl.controlsList="nodownload",this.#mainVideoEl.oncontextmenu="return false;",this.#mainVideoEl):(this.#mainVideoEl=document.createElement("img"),this.#mainImageEl)).setAttribute("alt",n.caption||""),s.setAttribute("title",n.caption||""),s.src=n.src,setTimeout(()=>{var i=this.#mainImageWrapper.clientWidth,t=this.#mainImageWrapper.clientHeight,e=+i/t;+n.width/n.height<e?(s.style.height=t+"px",s.style.width="auto"):(s.style.width=i+"px",s.style.height="auto")}),this.#mainImageWrapper.appendChild(s)}#setMainImage(i){i>=this.#options.images.length||i<0||(this.#currentImageIndex=i,this.#setMainImageEl(),this.#setActiveThumbnail(),this.#updateControlsVisibility())}#setActiveThumbnail(){var i;this.#options.images.length<=1||(i=this.#currentImageIndex,[].forEach.call(this.#bizonEl.querySelectorAll(".bizon-thumb-wrapper-active"),i=>{i.classList.remove("bizon-thumb-wrapper-active")}),this.#bizonEl.querySelector("#bizon-thumbnails").childNodes[i].classList.add("bizon-thumb-wrapper-active"))}#initControls(){var i=this.#bizonEl.querySelector("#bizon-main-image"),t=document.createElement("div"),e=(t.classList.add("bizon-move-section"),t.classList.add("bizon-move-section-left"),document.createElement("div"));e.classList.add("bizon-move-section"),e.classList.add("bizon-move-section-right"),this.#leftButtonEl=document.createElement("div"),this.#leftButtonEl.classList.add("bizon-move-arrow"),this.#leftButtonEl.classList.add("bizon-move-arrow-left"),this.#leftButtonEl.title="Previous",this.#rightButtonEl=document.createElement("div"),this.#rightButtonEl.classList.add("bizon-move-arrow"),this.#rightButtonEl.classList.add("bizon-move-arrow-right"),this.#rightButtonEl.title="Next",this.#closeButtonEl=document.createElement("div"),this.#closeButtonEl.classList.add("bizon-close-button"),this.#closeButtonEl.title="Close",t.appendChild(this.#leftButtonEl),e.appendChild(this.#rightButtonEl),e.appendChild(this.#closeButtonEl),i.appendChild(t),i.appendChild(e)}#updateControlsVisibility(){this.#bizonEl.querySelector(".bizon-move-arrow-right").style.display=this.#currentImageIndex>=this.#options.images.length-1||this.#options.images.length<=1?"none":"initial",this.#bizonEl.querySelector(".bizon-move-section-left").style.visibility=this.#currentImageIndex<=0?"hidden":"visible"}#bindEvents(){this.#rightButtonEl.parentNode.onclick=i=>{i.target==this.#closeButtonEl?this.hide():this.#setMainImage(this.#currentImageIndex+1)},this.#leftButtonEl.parentNode.onclick=i=>{this.#setMainImage(this.#currentImageIndex-1)},this.#bizonEl.querySelector("#bizon-main-image-wrapper").onclick=i=>{i.target==this.#bizonEl.querySelector("#bizon-main-image-wrapper")&&this.hide()},window.__bizon_keydown_callback=i=>{"Escape"===i.key&&this.hide(),"ArrowRight"===i.key&&this.#setMainImage(this.#currentImageIndex+1),"ArrowLeft"===i.key&&this.#setMainImage(this.#currentImageIndex-1)},window.addEventListener("keydown",window.__bizon_keydown_callback,!1)}#unbindEvents(){window.removeEventListener("keydown",window.__bizon_keydown_callback)}};